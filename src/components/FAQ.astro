---
// Data
import { faq } from "../lib/data/site-data";
---

<div class="space-y-6">
  {
    faq.map((faqItem) => (
      <details class="p-4 space-y-4 border border-gray-400 cursor-pointer">
        <summary class="flex gap-2 justify-between items-center list-none">
          <h3 class="text-xl sm:text-2xl">{faqItem.content.question}</h3>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="w-6 h-6"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M12 4v16m8-8H4"
            />
          </svg>
        </summary>
        <div class="space-y-2 answer" set:html={faqItem.content.answer} />
      </details>
    ))
  }
</div>

<script>
  // Open the first FAQ item on page
  const faqItems = document.querySelectorAll("details");

  if (faqItems[0]) {
    faqItems[0].open = true;
  }

  // Close all other FAQ items when one is clicked
  faqItems.forEach((faqItem) => {
    faqItem.addEventListener("click", () => {
      const otherFaqItems = Array.from(faqItems).filter(
        (item) => item !== faqItem
      );

      otherFaqItems.forEach((item) => {
        if (item.open) {
          item.open = false;
        }
      });
    });
  });
</script>
